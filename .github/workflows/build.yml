name: Build PS2 ISO

on:
  push:
    branches: [ main, master ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-24.04
    container:
      image: ps2dev/ps2dev:latest

    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Debug - show what is in this image
      run: |
        echo "=== PATH ==="
        echo $PATH
        echo "=== /usr/local/bin ==="
        ls /usr/local/bin/ | grep -i ee || echo "nothing"
        echo "=== /ps2dev ==="
        ls /ps2dev/ 2>/dev/null || echo "no /ps2dev"
        echo "=== /usr/local/ps2dev ==="
        ls /usr/local/ps2dev/ 2>/dev/null || echo "no /usr/local/ps2dev"
        echo "=== env vars ==="
        env | grep -i ps2 || echo "no ps2 vars"
        echo "=== all bin folders ==="
        ls /usr/local/ps2dev/ee/bin/ 2>/dev/null | head -5 || echo "no ee/bin"
